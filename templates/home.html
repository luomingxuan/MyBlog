{% extends 'base.html' %}
{% block content %}
<div class="page-hero" {% if background_url %}style="background-image:url('{{ background_url }}')"{% endif %}>
  {% if logo_url %}
  <img class="page-logo" src="{{ logo_url }}" alt="logo">
  {% endif %}
  <h1 class="mb-0 text-white text-shadow">{{ title }}</h1>
  </div>



{% if latest_posts %}
<h2 class="mt-4">最新博客</h2>
  <div class="row g-3 cards-grid">
  {% for p in latest_posts %}
  <div class="col-12 col-md-6 col-lg-4">
    <div class="card-item panel-glass p-3" tabindex="0">
      <a class="card-title-link home-title" href="{{ url_for('blog_bp.blog_view', slug=p.slug) }}">{{ p.title }}</a>
    </div>
  </div>
  {% endfor %}
</div>
{% endif %}
<script>
  (function(){
    var items = document.querySelectorAll('.cards-grid .card-item');
    items.forEach(function(el){
      el.addEventListener('click', function(){
        items.forEach(function(i){ i.classList.remove('selected'); });
        el.classList.add('selected');
      });
      el.addEventListener('keydown', function(e){
        if(e.key === 'Enter' || e.key === ' '){
          items.forEach(function(i){ i.classList.remove('selected'); });
          el.classList.add('selected');
        }
      });
      el.addEventListener('mousemove', function(e){
        var r = el.getBoundingClientRect();
        var x = e.clientX - r.left;
        var y = e.clientY - r.top;
        var rx = ((y / r.height) - 0.5) * -6;
        var ry = ((x / r.width) - 0.5) * 6;
        el.style.transform = 'perspective(600px) rotateX(' + rx + 'deg) rotateY(' + ry + 'deg)';
      });
      el.addEventListener('mouseleave', function(){
        el.style.transform = '';
      });
    });
  })();
</script>


{% endblock %}
